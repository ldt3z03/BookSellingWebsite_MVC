@model IEnumerable<Product>
@using X.PagedList;
@using X.PagedList.Mvc.Core;
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Chủ</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        .product-card {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .product-image {
            flex: 2; /* Chiếm 2/3 chiều cao thẻ */
            width: 100%;
            object-fit: cover;
        }

        .product-details {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 10px;
        }

            .product-details p {
                margin: 5px 0;
            }

        .btn-details {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <!-- Carousel -->
    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            @foreach (var product in Model.Take(5)) // Lấy ba sản phẩm đầu tiên cho băng truyền
            {
                <div class="carousel-item @(product == Model.First() ? "active" : "")">
                    <a asp-action="Details" asp-route-productId="@product.Id">
                        <img src="@(product.ProductImages.FirstOrDefault()?.ImageUrl ?? "https://via.placeholder.com/500")" class="d-block w-100" alt="Image @product.Title">
                    </a>
                </div>
            }
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>

    </div>
    <!-- Tiêu đề phía dưới carousel -->
    <div id="title-Hot" class="text-center">
        <p class="test">Chào mừng tới Website TTP SELLS BOOKS</p>
    </div>


    <section id="intro-section" class="w3l-passion-mid-sec home-phny py-5">
        <div class="container py-md-5 py-3">
            <div class="container HomePageAbout">
                <div class="row w3l-passion-mid-grids">
                    <div class="col-lg-6 passion-grid-item-info pe-lg-5 mb-lg-0 mb-5">
                        <h6 class="title-subw3hny mb-1">Welcome</h6>
                        <h3 class="title-w3l mb-4">TTP Sells books &amp; xây dựng phát triển website</h3>
                        <p class="mt-3 pe-lg-5">Chúng tôi ở đây để bán sách và đem tới trải nghiệm cho người dùng. Dưới đây là các sản phẩm chúng tôi đang bày bán với các chương trình ưu đãi dành cho khách hàng.</p>
                    </div>
                    <div class="col-lg-6 w3hny-passion-item">
                        <div class="row">
                            <div class="col-6 passion-grid-item-pic">
                                <img src="~/images/imagesdesign/anh2-removebg-preview.png" alt="" class="img-fluid radius-image">
                            </div>
                            <div class="col-6 passion-grid-item-pic">
                                <img src="~/images/imagesdesign/d1a80c65ca052b8ef599d7d459b68948-removebg-preview.png" alt="" class="img-fluid radius-image">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="container mt-4">
        <div class="row mb-3">
            <div class="col-12 filter-container">
                <a href="?sortOrder=Price&searchString=@ViewBag.CurrentFilter&category=@ViewBag.CurrentCategory" class="btn filter-btn btn-low-price">
                    <i class="fas fa-sort-amount-down-alt filter-icon"></i> Giá từ thấp đến cao
                </a>
                <a href="?sortOrder=price_desc&searchString=@ViewBag.CurrentFilter&category=@ViewBag.CurrentCategory" class="btn filter-btn btn-high-price">
                    <i class="fas fa-sort-amount-up-alt filter-icon"></i> Giá từ cao đến thấp
                </a>
            </div>
        </div>
        <form method="post" action="">
            <div class="row mb-3">
                <div class="col-md-3">
                    <label for="minPrice" class="form-label">Giá tối thiểu</label>
                    <input type="number" class="form-control" id="minPrice" name="minPrice" value="@ViewBag.MinPrice" />
                </div>
                <div class="col-md-3">
                    <label for="maxPrice" class="form-label">Giá tối đa</label>
                    <input type="number" class="form-control" id="maxPrice" name="maxPrice" value="@ViewBag.MaxPrice" />
                </div>
                <div class="col-md-3 align-self-end">
                    <button type="submit" class="btn btn-primary">Lọc</button>
                </div>
            </div>
        </form>

        <div class="row pb-3">
            @foreach (var product in Model)
            {
                <div class="col-lg-3 col-sm-6 mb-4">
                    <div class="card border-0 p-3 shadow border-top border-5 rounded product-card">
                        @if (product.ProductImages != null && product.ProductImages.Count() > 0)
                        {
                            <img src="@product.ProductImages.FirstOrDefault().ImageUrl" class="rounded product-image" />
                        }
                        else
                        {
                            <img src="https://placehold.co/500x600/png" class="rounded product-image" />
                        }
                        <div class="product-details">
                            <div>
                                <p class="card-title h5 text-dark opacity-75 text-uppercase text-center">@product.Title</p>
                                <p class="card-title text-warning text-center">by <b>@product.Author</b></p>
                            </div>
                            <div>
                                <p class="text-dark text-opacity-75 text-center mb-0">
                                    List Price:
                                    <span class="text-decoration-line-through">
                                        @product.ListPrice.ToString("c")
                                    </span>
                                </p>
                                <p class="text-dark text-opacity-75 text-center">
                                    As low as:
                                    <span>
                                        @product.Price100.ToString("c")
                                    </span>
                                </p>
                            </div>
                            <div class="btn-details">
                                <a asp-action="Details"
                                   asp-route-productId="@product.Id"
                                   class="btn btn-primary bg-gradient border-0 form-control">
                                    Details
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
    @Html.PagedListPager((IPagedList<Product>)Model, page => Url.Action("Index", new
        {
            page,
            sortOrder = ViewBag.CurrentSort,
            searchString = ViewBag.CurrentFilter,
            category = ViewBag.CurrentCategory,
            minPrice = ViewBag.MinPrice,
            maxPrice = ViewBag.MaxPrice
        }),
            new PagedListRenderOptions
    {
        LiElementClasses = new[] { "page-item" },
        PageClasses = new[] { "page-link" },
        UlElementClasses = new[] { "pagination" }
    })

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
</body>
</html>

<script>
    $(document).ready(function () {
        // Sử dụng the carousel
        $('#carouselExampleSlidesOnly').carousel();

        // Auto slide
        $('#carouselExampleSlidesOnly').carousel({
            interval: 700 // Thời gian chờ giữa các lần chuyển đổi, tính bằng mili giây
        });
    });
</script>

